<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#667eea">
    <title>Fenex Chess - Interactive Demo</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Fenex Chess Library Demo</h1>
            <p>Interactive demonstration of the Fenex Rust chess library's piece movement logic</p>
            <div class="links">
                <a href="https://crates.io/crates/fenex" target="_blank">Crates.io</a>
                <a href="https://github.com/Smallsan/fenex" target="_blank">GitHub</a>
                <a href="https://docs.rs/fenex" target="_blank">Documentation</a>
            </div>
        </header>

        <div class="game-container">
            <div class="board-container">
                <div id="chessboard" class="chessboard"></div>
                <div class="board-controls">
                    <div class="turn-indicator">
                        <span id="current-turn">White</span> to move
                    </div>
                    <div class="control-buttons">
                        <button id="reset-btn" class="btn">Reset Board</button>
                        <button id="fen-btn" class="btn">Copy FEN</button>
                        <button id="flip-btn" class="btn">Flip Board</button>
                    </div>
                </div>
            </div>

            <div class="info-panel">
                <div class="section">
                    <h3>How to Play</h3>
                    <ul>
                        <li>Click a piece to select it</li>
                        <li>Valid moves will be highlighted in green</li>
                        <li>Click a highlighted square to move</li>
                        <li>Supports all chess rules including castling, en passant, and promotion</li>
                        <li>Automatically detects check, checkmate, and stalemate</li>
                    </ul>
                </div>

                <div class="section">
                    <h3>Game Status</h3>
                    <div id="game-status" class="status-display">Game in progress</div>
                </div>

                <div class="section">
                    <h3>Current FEN Position</h3>
                    <textarea id="fen-display" readonly placeholder="FEN will appear here..."></textarea>
                    <div class="fen-controls">
                        <button id="load-fen-btn" class="btn">Load Custom FEN</button>
                        <input type="text" id="fen-input" placeholder="Enter FEN string..." style="display: none;">
                        <button id="apply-fen-btn" class="btn" style="display: none;">Apply</button>
                        <button id="cancel-fen-btn" class="btn" style="display: none;">Cancel</button>
                    </div>
                </div>

                <div class="section">
                    <h3>Move History</h3>
                    <div id="move-history" class="move-history"></div>
                    <button id="clear-history-btn" class="btn btn-small">Clear History</button>
                </div>

                <div class="section">
                    <h3>About Fenex</h3>
                    <p>Fenex is a comprehensive Rust chess library that provides:</p>
                    <ul>
                        <li><strong>FEN Support:</strong> Parse and generate FEN strings</li>
                        <li><strong>Move Generation:</strong> Legal move validation</li>
                        <li><strong>Special Moves:</strong> Castling, en passant, pawn promotion</li>
                        <li><strong>Game States:</strong> Check, checkmate, and stalemate detection</li>
                        <li><strong>Chess Notation:</strong> Algebraic notation support</li>
                    </ul>
                    <p>This web demo replicates the library's core functionality in JavaScript for interactive demonstration.</p>
                </div>

                <div class="section">
                    <h3>Quick Examples</h3>
                    <div class="example-positions">
                        <button class="btn btn-small example-btn" data-fen="r1bqkb1r/pppp1ppp/2n2n2/4p3/2B1P3/3P1N2/PPP2PPP/RNBQK2R w KQkq - 4 4">Italian Game</button>
                        <button class="btn btn-small example-btn" data-fen="rnbqkbnr/ppp1pppp/8/3p4/4P3/8/PPPP1PPP/RNBQKBNR w KQkq d6 0 2">Queen's Pawn</button>
                        <button class="btn btn-small example-btn" data-fen="r1bq1rk1/ppp2ppp/2np1n2/2b1p3/2B1P3/3P1N2/PPP2PPP/RNBQ1RK1 w - - 6 6">Castled Position</button>
                        <button class="btn btn-small example-btn" data-fen="8/P7/8/8/8/8/p7/8 w - - 0 1">Promotion Test</button>
                        <button class="btn btn-small example-btn" data-fen="8/8/8/4k3/8/8/4K3/8 w - - 0 1">King Endgame</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Promotion Dialog -->
        <div id="promotion-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>Choose Promotion Piece</h3>
                <p>Your pawn can be promoted to:</p>
                <div class="promotion-choices">
                    <button class="promotion-btn" data-piece="queen">
                        <span class="promotion-piece">♕</span>
                        <span class="promotion-label">Queen</span>
                    </button>
                    <button class="promotion-btn" data-piece="rook">
                        <span class="promotion-piece">♖</span>
                        <span class="promotion-label">Rook</span>
                    </button>
                    <button class="promotion-btn" data-piece="bishop">
                        <span class="promotion-piece">♗</span>
                        <span class="promotion-label">Bishop</span>
                    </button>
                    <button class="promotion-btn" data-piece="knight">
                        <span class="promotion-piece">♘</span>
                        <span class="promotion-label">Knight</span>
                    </button>
                </div>
            </div>
        </div>

        <footer>
            <p>Built with the <strong>Fenex</strong> chess library logic</p>
            <p>Deploy this demo on GitHub Pages by pushing to your repository</p>
        </footer>
    </div>

    <script src="chess-wasm.js"></script>
</body>
</html>
